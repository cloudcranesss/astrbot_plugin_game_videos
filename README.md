# 随机美女视频插件

一个功能强大的AstrBot插件，支持从多个API获取随机美女短视频，具备智能重试和故障转移功能。

## 🌟 功能特性

- **多源支持**：集成3个不同的视频API，自动切换
- **智能重试**：失败时自动重试，最多3次
- **故障转移**：主API故障时自动切换到备用API
- **连接池**：优化网络性能，减少资源消耗
- **命令组**：使用AstrBot命令组模式，操作更便捷
- **详细日志**：完善的日志记录，便于调试

## 🚀 安装方法

### 通过AstrBot插件市场安装
在AstrBot管理界面搜索"随机美女视频"即可安装。

### 手动安装
1. 下载插件到`plugins`目录
2. 重启AstrBot

## 🎯 使用方法

### 基本命令

所有命令都通过`video`命令组调用：

#### 1. 获取美女视频
```
video 美女
```
获取一个随机美女短视频。

#### 2. 获取随机视频
```
video 随机
```
与"美女"命令相同，获取随机视频。

#### 3. 查看插件状态
```
video 状态
```
显示插件当前状态，包括API数量、连接状态等。

#### 4. 查看帮助
```
video
```
显示所有可用命令。

## 📊 使用示例

### 获取美女视频
```
用户: video 美女
机器人: 🎬 正在获取美女视频，请稍候...
机器人: 📹 美女视频
[视频消息]
```

### 查看状态
```
用户: video 状态
机器人: 📊 视频插件状态:
API数量: 3
会话状态: 活跃
重试次数: 3
超时设置: 30秒
```

## 🔧 技术优化

### 网络优化
- **连接池管理**：使用aiohttp连接池，限制并发连接数
- **DNS缓存**：启用DNS缓存，减少解析时间
- **超时控制**：连接超时10秒，总超时30秒

### 错误处理
- **重试机制**：网络错误时自动重试3次
- **指数退避**：重试间隔递增，避免API压力
- **故障转移**：主API失败时自动切换备用API

### 性能提升
- **异步处理**：完全异步实现，不阻塞主线程
- **资源复用**：会话复用，减少连接开销
- **智能缓存**：DNS缓存和连接池优化

## 📝 更新日志

### v2.0.0
- ✨ 重构为命令组模式
- ✨ 增加多API支持
- ✨ 添加智能重试机制
- ✨ 优化错误处理
- ✨ 增强日志记录
- ✨ 添加状态检查功能

### v1.0.0
- 🎉 初始版本发布
- ✨ 基础视频获取功能
- ✨ 简单错误处理

## ⚠️ 注意事项

1. **网络要求**：需要稳定的网络连接
2. **API限制**：不同API可能有访问频率限制
3. **内容审核**：视频内容来自第三方API，请遵守相关法规
4. **隐私保护**：插件不会收集或存储用户数据

## 🤝 支持与反馈

- **GitHub**: [提交Issue](https://github.com/cloudcranesss/astrbot_plugin_game_videos/issues)
- **邮箱**: cloudcranesss@outlook.com

## 📄 许可证

MIT License - 详见LICENSE文件